#!/bin/bash

set -e

echo -n "Linting..."

ROOT="$(dirname $0)/.."

${ROOT}/script/bootstrap
${ROOT}/bin/puppet parser validate $(find modules/ -name "*.pp")

${ROOT}/bin/puppet-lint --log-format "%{fullpath}:%{line} %{KIND} %{message}" \
  --no-documentation-check \
  --no-80chars-check \
  --no-class_inherits_from_params_class-check \
  --fail-on-warnings \
  modules/

echo "All good!"

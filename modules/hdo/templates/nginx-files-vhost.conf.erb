#
# This file is managed by Puppet. Local edits will be lost.
#

server {
  listen      80;
  server_name <%= @server_name %>;
  root        <%= @files_root %>;
  autoindex   off;

  access_log  /opt/nginx/logs/<%= @server_name %>.access.log combined;
  error_log   /opt/nginx/logs/<%= @server_name %>.error.log;

  <% if @ssl %>
    <%= scope.function_template(['hdo/nginx-ssl-conf.erb']) %>
  <% end %>

  location ~ /pdf/(alternative-statsbudsjett|partiprogram) {
    autoindex on;
  }

  location /pdf/retriever/utbrytere {
    autoindex on;
  }

  location /prototyper/enighet {
    return 301 https://enighet.holderdeord.no/;
  }
}
